# =================================================================
# API GATEWAY SERVICE
# =================================================================

# Server Configuration
NODE_ENV=development
PORT=3000
API_PREFIX=api

# Service Discovery - Internal Service URLs
AUTH_SERVICE_HOST=localhost
AUTH_SERVICE_PORT=3001
TRACKING_SERVICE_HOST=localhost
TRACKING_SERVICE_PORT=3002
ANALYTICS_SERVICE_HOST=localhost
ANALYTICS_SERVICE_PORT=3003
PLAYBACK_SERVICE_HOST=localhost
PLAYBACK_SERVICE_PORT=3004
PROCESSING_SERVICE_HOST=localhost
PROCESSING_SERVICE_PORT=3005

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Rate Limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=15

# CORS Configuration
CORS_ORIGINS=http://localhost:3001,http://localhost:4200,http://localhost:3000
CORS_CREDENTIALS=true

# Request Timeout (milliseconds)
REQUEST_TIMEOUT=30000

# Logging
LOG_LEVEL=debug


# =================================================================
# AUTH SERVICE
# =================================================================

# Server Configuration
AUTH_SERVICE_PORT=3001
AUTH_SERVICE_HOST=localhost

# PostgreSQL Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=hotjar_auth
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_SSL=false
DATABASE_LOGGING=true

# JWT Configuration
JWT_SECRET=change-this-to-a-very-secure-secret-key-in-production
JWT_EXPIRATION=7d
JWT_REFRESH_SECRET=change-this-refresh-secret-key-as-well
JWT_REFRESH_EXPIRATION=30d

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Password Hashing
BCRYPT_SALT_ROUNDS=10

# Email Service (Optional - for verification emails)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM=noreply@yourapp.com


# =================================================================
# TRACKING SERVICE
# =================================================================

# Server Configuration
TRACKING_SERVICE_PORT=3002
TRACKING_SERVICE_HOST=localhost

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# RabbitMQ Configuration
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_EXCHANGE=hotjar.events
RABBITMQ_QUEUE_EVENTS=events.raw
RABBITMQ_QUEUE_PRIORITY=events.priority
RABBITMQ_PREFETCH_COUNT=10

# Rate Limiting & Throttling
MAX_EVENTS_PER_SECOND=1000
MAX_EVENTS_PER_PROJECT=10000
MAX_BATCH_SIZE=50

# Event Validation
MAX_EVENT_SIZE_KB=50
ALLOWED_EVENT_TYPES=click,scroll,mousemove,pageview,resize,focus,blur

# CORS for tracking endpoint
TRACKING_CORS_ORIGINS=*

# IP Geolocation (Optional)
IPSTACK_API_KEY=your-ipstack-api-key


# =================================================================
# ANALYTICS SERVICE
# =================================================================

# Server Configuration
ANALYTICS_SERVICE_PORT=3003
ANALYTICS_SERVICE_HOST=localhost

# PostgreSQL Database
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=hotjar_analytics
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_SSL=false
DATABASE_LOGGING=false

# MongoDB - For querying events
MONGODB_URI=mongodb://localhost:27017/hotjar_events
MONGODB_OPTIONS=retryWrites=true&w=majority

# Redis Cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
CACHE_TTL=3600
CACHE_PREFIX=analytics:

# Analytics Configuration
ANALYTICS_AGGREGATION_INTERVAL=300000
ANALYTICS_RETENTION_DAYS=90
REAL_TIME_UPDATE_INTERVAL=5000

# Reporting
REPORT_MAX_RECORDS=10000
EXPORT_FORMATS=csv,json,pdf


# =================================================================
# PLAYBACK SERVICE
# =================================================================

# Server Configuration
PLAYBACK_SERVICE_PORT=3004
PLAYBACK_SERVICE_HOST=localhost

# MongoDB - For session data
MONGODB_URI=mongodb://localhost:27017/hotjar_events
MONGODB_OPTIONS=retryWrites=true&w=majority

# Redis Cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
CACHE_TTL=3600
SESSION_CACHE_TTL=7200

# Session Storage
SESSION_RETENTION_DAYS=30
MAX_SESSION_DURATION_MINUTES=60

# AWS S3 (Optional - for storing large session recordings)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_S3_BUCKET=hotjar-recordings
AWS_S3_PREFIX=sessions/
USE_S3_STORAGE=false

# Streaming Configuration
STREAM_CHUNK_SIZE=1000
MAX_CONCURRENT_STREAMS=100

# Heatmap Configuration
HEATMAP_RESOLUTION_WIDTH=1920
HEATMAP_RESOLUTION_HEIGHT=1080
HEATMAP_CACHE_TTL=86400


# =================================================================
# PROCESSING SERVICE
# =================================================================

# Server Configuration
PROCESSING_SERVICE_PORT=3005
PROCESSING_SERVICE_HOST=localhost

# MongoDB - For event storage
MONGODB_URI=mongodb://localhost:27017/hotjar_events
MONGODB_OPTIONS=retryWrites=true&w=majority

# RabbitMQ Configuration
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_EXCHANGE=hotjar.events
RABBITMQ_QUEUE_EVENTS=events.raw
RABBITMQ_QUEUE_HEATMAP=heatmap.calculate
RABBITMQ_QUEUE_ANALYTICS=analytics.aggregate
RABBITMQ_QUEUE_SESSION=session.aggregate
RABBITMQ_PREFETCH_COUNT=50

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Processing Configuration
BATCH_SIZE=100
PROCESSING_INTERVAL=5000
MAX_CONCURRENT_JOBS=10
RETRY_ATTEMPTS=3
RETRY_DELAY=1000

# Session Aggregation
SESSION_IDLE_TIMEOUT=1800000
SESSION_MAX_DURATION=3600000

# Heatmap Generation
HEATMAP_GRID_SIZE=20
HEATMAP_BLUR_RADIUS=30
HEATMAP_MIN_EVENTS=10

# Worker Threads
WORKER_THREADS=4
USE_CLUSTERING=false

# Data Retention
EVENT_RETENTION_DAYS=90
PROCESSED_EVENT_RETENTION_DAYS=365


# =================================================================
# SHARED CONFIGURATION (All Services)
# =================================================================

# Application
APP_NAME=
APP_VERSION=1.0.0
APP_URL=http://localhost:3000

# Environment
NODE_ENV=development
TZ=UTC

# Logging
LOG_LEVEL=debug
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true

# Security
ENABLE_HELMET=true
ENABLE_CORS=true
ENABLE_RATE_LIMITING=true

# Monitoring (Optional - Sentry, DataDog, etc.)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
ENABLE_APM=false

# Feature Flags
ENABLE_HEATMAPS=true
ENABLE_SESSION_RECORDING=true
ENABLE_ANALYTICS=true
ENABLE_FEEDBACK=false


# =================================================================
# DOCKER COMPOSE CONFIGURATION
# =================================================================

# PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=hotjar_auth
POSTGRES_PORT=5432

# MongoDB
MONGO_INITDB_ROOT_USERNAME=root
MONGO_INITDB_ROOT_PASSWORD=mongodb_password
MONGO_PORT=27017

# Redis
REDIS_PASSWORD=
REDIS_PORT=6379

# RabbitMQ
RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672


# =================================================================
# PRODUCTION OVERRIDES (Set these in production)
# =================================================================

# NODE_ENV=production
# LOG_LEVEL=info
# DATABASE_SSL=true
# USE_S3_STORAGE=true
# ENABLE_APM=true
# SENTRY_ENVIRONMENT=production